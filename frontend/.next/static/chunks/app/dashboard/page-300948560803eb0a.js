(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6921:function(e,s,t){Promise.resolve().then(t.bind(t,441))},441:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var a=t(7437),l=t(2265),r=t(7648),c=t(9376),i=t(1245),n=t(8705),d=t(9820),o=t(2381),x=t(1837),u=t(1817),m=t(2051),h=t(3454),j=t(2934),p=t(4001),f=t(9397),b=t(6858);function g(){let{user:e,loading:s}=(0,i.a)(),t=(0,c.useRouter)(),[g,N]=(0,l.useState)(null),[v,w]=(0,l.useState)([]),[y,Z]=(0,l.useState)([]),[k,S]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{s||e||t.push("/login")},[e,s,t]),(0,l.useEffect)(()=>{(async()=>{if(null==e?void 0:e.id)try{let[s,t,a]=await Promise.all([x.aA.get(e.id),x.qx.getAll(e.id),x.Sm.getAll(e.id)]);N(s),w(t.slice(0,3)),Z(a.slice(0,5))}catch(e){console.error("Failed to fetch dashboard data:",e)}finally{S(!1)}})()},[e]),s||!e)return(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsx)(u.Z,{className:"w-8 h-8 animate-spin text-primary"})});let _=[{label:"Projects",value:(null==g?void 0:g.projects)||0,icon:m.Z,color:"primary"},{label:"Total Builds",value:(null==g?void 0:g.total_builds)||0,icon:h.Z,color:"secondary"},{label:"Successful",value:(null==g?void 0:g.successful_builds)||0,icon:j.Z,color:"success"},{label:"API Keys",value:(null==g?void 0:g.api_keys)||0,icon:p.Z,color:"warning"}];return(0,a.jsxs)(n.c,{title:"Welcome back, ".concat(e.name),subtitle:"Here's an overview of your NativiWeb projects",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:_.map(e=>{let s=e.icon;return(0,a.jsx)(d.Zb,{className:"bg-background-paper border-white/10","data-testid":"stat-".concat(e.label.toLowerCase()),children:(0,a.jsx)(d.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.label}),(0,a.jsx)("p",{className:"text-3xl font-bold mt-1",children:k?(0,a.jsx)(u.Z,{className:"w-6 h-6 animate-spin"}):e.value})]}),(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg bg-".concat(e.color,"/10 flex items-center justify-center"),children:(0,a.jsx)(s,{className:"w-6 h-6 text-".concat(e.color)})})]})})},e.label)})}),(0,a.jsxs)(d.Zb,{className:"bg-background-paper border-white/10 mb-8",children:[(0,a.jsxs)(d.Ol,{children:[(0,a.jsx)(d.ll,{children:"Quick Actions"}),(0,a.jsx)(d.SZ,{children:"Get started with your next native app"})]}),(0,a.jsx)(d.aY,{children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsx)(r.default,{href:"/projects/new",children:(0,a.jsxs)(o.z,{className:"bg-primary text-black font-bold hover:bg-primary-hover","data-testid":"new-project-btn",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"New Project"]})}),(0,a.jsx)(r.default,{href:"/docs",children:(0,a.jsx)(o.z,{variant:"outline",className:"border-white/10","data-testid":"docs-btn",children:"View Documentation"})}),(0,a.jsx)(r.default,{href:"/api-keys",children:(0,a.jsxs)(o.z,{variant:"outline",className:"border-white/10","data-testid":"api-keys-btn",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Manage API Keys"]})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)(d.Zb,{className:"bg-background-paper border-white/10",children:[(0,a.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.ll,{children:"Recent Projects"}),(0,a.jsx)(d.SZ,{children:"Your latest projects"})]}),(0,a.jsx)(r.default,{href:"/projects",children:(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",className:"text-primary",children:["View All ",(0,a.jsx)(b.Z,{className:"w-4 h-4 ml-1"})]})})]}),(0,a.jsx)(d.aY,{children:k?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)(u.Z,{className:"w-6 h-6 animate-spin text-primary"})}):0===v.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"No projects yet"}),(0,a.jsx)(r.default,{href:"/projects/new",children:(0,a.jsxs)(o.z,{size:"sm",className:"bg-primary text-black",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Create Your First Project"]})})]}):(0,a.jsx)("div",{className:"space-y-3",children:v.map(e=>(0,a.jsx)(r.default,{href:"/projects/".concat(e.id),children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border border-white/5 hover:border-primary/30 transition-colors","data-testid":"project-".concat(e.id),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:e.web_url})]}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("active"===e.status?"bg-success/20 text-success":"bg-warning/20 text-warning"),children:e.status})]})},e.id))})})]}),(0,a.jsxs)(d.Zb,{className:"bg-background-paper border-white/10",children:[(0,a.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.ll,{children:"Recent Builds"}),(0,a.jsx)(d.SZ,{children:"Latest build activity"})]}),(0,a.jsx)(r.default,{href:"/builds",children:(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",className:"text-primary",children:["View All ",(0,a.jsx)(b.Z,{className:"w-4 h-4 ml-1"})]})})]}),(0,a.jsx)(d.aY,{children:k?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)(u.Z,{className:"w-6 h-6 animate-spin text-primary"})}):0===y.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"No builds yet"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Create a project and start a build"})]}):(0,a.jsx)("div",{className:"space-y-3",children:y.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border border-white/5","data-testid":"build-".concat(e.id),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded flex items-center justify-center text-xs font-bold ".concat("android"===e.platform?"bg-success/20 text-success":"bg-info/20 text-info"),children:"android"===e.platform?"AND":"iOS"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:["Build #",e.id.slice(0,8)]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.platform})]})]}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("completed"===e.status?"bg-success/20 text-success":"processing"===e.status?"bg-primary/20 text-primary":"failed"===e.status?"bg-destructive/20 text-destructive":"bg-warning/20 text-warning"),children:e.status})]},e.id))})})]})]})]})}}},function(e){e.O(0,[259,464,972,572,168,886,971,117,744],function(){return e(e.s=6921)}),_N_E=e.O()}]);