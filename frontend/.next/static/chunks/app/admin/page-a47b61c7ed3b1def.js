(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{3992:function(e,s,t){Promise.resolve().then(t.bind(t,3922))},2934:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9205).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},3922:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var r=t(7437),a=t(2265),n=t(9376),i=t(1245),l=t(8705),c=t(9820),d=t(2381),o=t(9174),u=t(7168),m=t(641),x=t(1837),h=t(4438),f=t(1817),p=t(8906),j=t(9205);let b=(0,j.Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),g=(0,j.Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var v=t(3454),N=t(8736);let y=(0,j.Z)("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var w=t(2934);function k(){let{user:e,loading:s}=(0,i.a)(),t=(0,n.useRouter)(),[j,k]=(0,a.useState)([]),[Z,S]=(0,a.useState)([]),[C,_]=(0,a.useState)([]),[A,U]=(0,a.useState)(null),[q,M]=(0,a.useState)(!0);(0,a.useEffect)(()=>{s||e||t.push("/login")},[e,s,t]),(0,a.useEffect)(()=>{(async()=>{if(null==e?void 0:e.id){if("admin"!==e.role){h.Am.error("Admin access required"),t.push("/dashboard");return}try{let[s,t,r,a]=await Promise.all([x.Nq.getUsers(e.id),x.Nq.getBuilds(e.id),x.Nq.getLogs(e.id),x.Nq.getAnalytics(e.id)]);k(s.users||[]),S(t.builds||[]),_(r.logs||[]),U(a)}catch(e){var s;(null===(s=e.response)||void 0===s?void 0:s.status)===403?(h.Am.error("Admin access required"),t.push("/dashboard")):console.error("Failed to fetch admin data:",e)}finally{M(!1)}}})()},[e,t]);let P=async s=>{if(null==e?void 0:e.id)try{await x.Nq.updateUser(s,e.id,{status:"banned"}),k(j.map(e=>e.id===s?{...e,status:"banned"}:e)),h.Am.success("User banned")}catch(e){h.Am.error("Failed to ban user")}},Y=async s=>{if(null==e?void 0:e.id)try{await x.Nq.updateUser(s,e.id,{status:"active"}),k(j.map(e=>e.id===s?{...e,status:"active"}:e)),h.Am.success("User unbanned")}catch(e){h.Am.error("Failed to unban user")}};return s||!e?(0,r.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,r.jsx)(f.Z,{className:"w-8 h-8 animate-spin text-primary"})}):"admin"!==e.role?(0,r.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(p.Z,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"You need admin privileges to access this page."})]})}):(0,r.jsxs)(l.c,{title:"Admin Panel",subtitle:"Manage platform users and settings",children:[A&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)(c.Zb,{className:"bg-background-paper border-white/10",children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Users"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:A.users.total}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[A.users.active," active"]})]}),(0,r.jsx)(b,{className:"w-8 h-8 text-primary"})]})})}),(0,r.jsx)(c.Zb,{className:"bg-background-paper border-white/10",children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Projects"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:A.projects.total})]}),(0,r.jsx)(g,{className:"w-8 h-8 text-secondary"})]})})}),(0,r.jsx)(c.Zb,{className:"bg-background-paper border-white/10",children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Builds"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:A.builds.total}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[A.builds.success_rate,"% success"]})]}),(0,r.jsx)(v.Z,{className:"w-8 h-8 text-success"})]})})}),(0,r.jsx)(c.Zb,{className:"bg-background-paper border-white/10",children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Platforms"}),(0,r.jsxs)("p",{className:"text-sm",children:["Android: ",A.platforms.android]}),(0,r.jsxs)("p",{className:"text-sm",children:["iOS: ",A.platforms.ios]})]}),(0,r.jsx)(N.Z,{className:"w-8 h-8 text-warning"})]})})})]}),(0,r.jsxs)(u.mQ,{defaultValue:"users",className:"space-y-6",children:[(0,r.jsxs)(u.dr,{className:"bg-background-subtle",children:[(0,r.jsx)(u.SP,{value:"users",children:"Users"}),(0,r.jsx)(u.SP,{value:"builds",children:"Builds"}),(0,r.jsx)(u.SP,{value:"logs",children:"System Logs"})]}),(0,r.jsx)(u.nU,{value:"users",children:(0,r.jsxs)(c.Zb,{className:"bg-background-paper border-white/10",children:[(0,r.jsxs)(c.Ol,{children:[(0,r.jsx)(c.ll,{children:"User Management"}),(0,r.jsx)(c.SZ,{children:"Manage platform users"})]}),(0,r.jsx)(c.aY,{children:q?(0,r.jsx)("div",{className:"flex justify-center py-10",children:(0,r.jsx)(f.Z,{className:"w-8 h-8 animate-spin text-primary"})}):(0,r.jsx)(m.x,{className:"h-[400px]",children:(0,r.jsx)("div",{className:"space-y-3",children:j.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border border-white/10",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsx)(o.C,{variant:"admin"===e.role?"default":"outline",children:e.role}),(0,r.jsx)(o.C,{variant:"active"===e.status?"success":"destructive",children:e.status})]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[e.projects_count," projects â€¢ ",e.builds_count," builds"]})]}),(0,r.jsx)("div",{className:"flex gap-2",children:"active"===e.status?(0,r.jsxs)(d.z,{size:"sm",variant:"outline",className:"border-destructive/30 text-destructive hover:bg-destructive/10",onClick:()=>P(e.id),disabled:"admin"===e.role,children:[(0,r.jsx)(y,{className:"w-4 h-4 mr-1"}),"Ban"]}):(0,r.jsxs)(d.z,{size:"sm",variant:"outline",className:"border-success/30 text-success hover:bg-success/10",onClick:()=>Y(e.id),children:[(0,r.jsx)(w.Z,{className:"w-4 h-4 mr-1"}),"Unban"]})})]},e.id))})})})]})}),(0,r.jsx)(u.nU,{value:"builds",children:(0,r.jsxs)(c.Zb,{className:"bg-background-paper border-white/10",children:[(0,r.jsxs)(c.Ol,{children:[(0,r.jsx)(c.ll,{children:"Build History"}),(0,r.jsx)(c.SZ,{children:"All builds across the platform"})]}),(0,r.jsx)(c.aY,{children:(0,r.jsx)(m.x,{className:"h-[400px]",children:(0,r.jsx)("div",{className:"space-y-3",children:Z.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border border-white/10",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.project_name}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["by ",e.user_name]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleString()})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.C,{variant:"outline",children:e.platform}),(0,r.jsx)(o.C,{variant:"completed"===e.status?"success":"failed"===e.status?"destructive":"default",children:e.status})]})]},e.id))})})})]})}),(0,r.jsx)(u.nU,{value:"logs",children:(0,r.jsxs)(c.Zb,{className:"bg-background-paper border-white/10",children:[(0,r.jsxs)(c.Ol,{children:[(0,r.jsx)(c.ll,{children:"System Logs"}),(0,r.jsx)(c.SZ,{children:"Platform activity logs"})]}),(0,r.jsx)(c.aY,{children:(0,r.jsx)(m.x,{className:"h-[400px]",children:(0,r.jsx)("div",{className:"space-y-2",children:C.map(e=>(0,r.jsxs)("div",{className:"p-3 rounded-lg border border-white/10 font-mono text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)(o.C,{variant:"error"===e.level?"destructive":"warning"===e.level?"warning":"default",className:"text-xs",children:e.level}),(0,r.jsx)(o.C,{variant:"outline",className:"text-xs",children:e.category}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleString()})]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:e.message})]},e.id))})})})]})})]})]})}},9174:function(e,s,t){"use strict";t.d(s,{C:function(){return l}});var r=t(7437);t(2265);var a=t(535),n=t(3448);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-success/20 text-success",warning:"border-transparent bg-warning/20 text-warning"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...a})}},641:function(e,s,t){"use strict";t.d(s,{x:function(){return l}});var r=t(7437),a=t(2265),n=t(314),i=t(3448);let l=a.forwardRef((e,s)=>{let{className:t,children:a,...l}=e;return(0,r.jsxs)(n.fC,{ref:s,className:(0,i.cn)("relative overflow-hidden",t),...l,children:[(0,r.jsx)(n.l_,{className:"h-full w-full rounded-[inherit]",children:a}),(0,r.jsx)(c,{}),(0,r.jsx)(n.Ns,{})]})});l.displayName=n.fC.displayName;let c=a.forwardRef((e,s)=>{let{className:t,orientation:a="vertical",...l}=e;return(0,r.jsx)(n.gb,{ref:s,orientation:a,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...l,children:(0,r.jsx)(n.q4,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=n.gb.displayName},7168:function(e,s,t){"use strict";t.d(s,{SP:function(){return d},dr:function(){return c},mQ:function(){return l},nU:function(){return o}});var r=t(7437),a=t(2265),n=t(4419),i=t(3448);let l=n.fC,c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.aV,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});c.displayName=n.aV.displayName;let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.xz,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});d.displayName=n.xz.displayName;let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.VY,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});o.displayName=n.VY.displayName}},function(e){e.O(0,[259,464,972,572,438,299,329,886,971,117,744],function(){return e(e.s=3992)}),_N_E=e.O()}]);