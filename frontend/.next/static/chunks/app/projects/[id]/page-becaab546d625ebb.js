(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{7386:function(e,s,r){Promise.resolve().then(r.bind(r,2577))},2577:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return O}});var t=r(7437),a=r(2265),i=r(9376),l=r(1245),n=r(8705),d=r(9820),c=r(2381),o=r(9174),u=r(721),m=r(3448);let f=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(u.fC,{className:(0,m.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...a,ref:s,children:(0,t.jsx)(u.bU,{className:(0,m.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});f.displayName=u.fC.displayName;var x=r(7204),h=r(7168),p=r(641),b=r(1837),g=r(4438),j=r(1817),v=r(9202),N=r(3388),w=r(6657),y=r(3276),k=r(8728),Z=r(1723),C=r(2934),S=r(9388),A=r(9322),_=r(2735);function O(){let{user:e}=(0,l.a)(),s=(0,i.useRouter)(),r=(0,i.useParams)().id,[u,m]=(0,a.useState)(null),[O,P]=(0,a.useState)([]),[z,B]=(0,a.useState)([]),[F,R]=(0,a.useState)(!0),[E,U]=(0,a.useState)(null),[V,Y]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{if((null==e?void 0:e.id)&&r)try{let[s,t,a]=await Promise.all([b.qx.getOne(r,e.id),b.Sm.getAll(e.id,r),b.z3.getAll()]);m(s),P(t),B(a)}catch(e){console.error("Failed to fetch project:",e),g.Am.error("Failed to load project"),s.push("/projects")}finally{R(!1)}})()},[e,r,s]),(0,a.useEffect)(()=>{if(!V||"completed"===V.status||"failed"===V.status)return;let s=setInterval(async()=>{if(null==e?void 0:e.id)try{let s=await b.Sm.getOne(V.id,e.id);if(Y(s),"completed"===s.status){g.Am.success("Build completed successfully!"),U(null);let s=await b.Sm.getAll(e.id,r);P(s)}else"failed"===s.status&&(g.Am.error("Build failed"),U(null))}catch(e){console.error("Failed to fetch build status:",e)}},2e3);return()=>clearInterval(s)},[V,e,r]);let D=async(s,t)=>{if(!u||!(null==e?void 0:e.id))return;let a=u.features.map(e=>e.id===s?{...e,enabled:t}:e);try{await b.qx.update(r,{features:a},e.id),m({...u,features:a}),g.Am.success("Feature ".concat(t?"enabled":"disabled"))}catch(e){g.Am.error("Failed to update feature")}},q=async s=>{if((null==e?void 0:e.id)&&u){U(s);try{let t=await b.Sm.create({project_id:r,platform:s,build_type:"debug"},e.id);Y(t),P([t,...O]),g.Am.success("".concat(s," build started"))}catch(e){var t,a;g.Am.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.detail)||"Failed to start build"),U(null)}}};return F||!u?(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsx)(j.Z,{className:"w-8 h-8 animate-spin text-primary"})}):(0,t.jsx)(n.c,{title:u.name,subtitle:u.web_url,children:(0,t.jsxs)(h.mQ,{defaultValue:"overview",className:"space-y-6",children:[(0,t.jsxs)(h.dr,{className:"bg-background-subtle",children:[(0,t.jsx)(h.SP,{value:"overview",children:"Overview"}),(0,t.jsx)(h.SP,{value:"features",children:"Features"}),(0,t.jsx)(h.SP,{value:"builds",children:"Builds"})]}),(0,t.jsx)(h.nU,{value:"overview",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(d.Zb,{className:"bg-background-paper border-white/10",children:[(0,t.jsx)(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Z,{className:"w-5 h-5 text-primary"}),"Project Information"]})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Web URL"}),(0,t.jsx)("a",{href:u.web_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:u.web_url})]}),u.description&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Description"}),(0,t.jsx)("p",{children:u.description})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Platforms"}),(0,t.jsxs)("div",{className:"flex gap-2 mt-1",children:[u.platform.includes("android")&&(0,t.jsxs)(o.C,{variant:"outline",className:"text-success border-success/30",children:[(0,t.jsx)(N.Z,{className:"w-3 h-3 mr-1"})," Android"]}),u.platform.includes("ios")&&(0,t.jsxs)(o.C,{variant:"outline",className:"text-info border-info/30",children:[(0,t.jsx)(w.Z,{className:"w-3 h-3 mr-1"})," iOS"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Status"}),(0,t.jsx)(o.C,{variant:"active"===u.status?"success":"warning",children:u.status})]})]})]}),(0,t.jsxs)(d.Zb,{className:"bg-background-paper border-white/10",children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(y.Z,{className:"w-5 h-5 text-primary"}),"Build Actions"]}),(0,t.jsx)(d.SZ,{children:"Start a new build for your project"})]}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[u.platform.includes("android")&&(0,t.jsxs)(c.z,{className:"w-full justify-start bg-success/10 text-success hover:bg-success/20 border border-success/30",onClick:()=>q("android"),disabled:null!==E,"data-testid":"build-android-btn",children:["android"===E?(0,t.jsx)(j.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,t.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Build for Android"]}),u.platform.includes("ios")&&(0,t.jsxs)(c.z,{className:"w-full justify-start bg-info/10 text-info hover:bg-info/20 border border-info/30",onClick:()=>q("ios"),disabled:null!==E,"data-testid":"build-ios-btn",children:["ios"===E?(0,t.jsx)(j.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,t.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),"Build for iOS"]}),V&&"processing"===V.status&&(0,t.jsxs)("div",{className:"mt-6 p-4 rounded-lg border border-primary/30 bg-primary/5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:["Building ",V.platform,"..."]}),(0,t.jsxs)("span",{className:"text-sm text-primary",children:[V.progress,"%"]})]}),(0,t.jsx)(x.E,{value:V.progress,className:"h-2"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:V.phase})]})]})]})]})}),(0,t.jsx)(h.nU,{value:"features",children:(0,t.jsxs)(d.Zb,{className:"bg-background-paper border-white/10",children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(k.Z,{className:"w-5 h-5 text-primary"}),"Native Features"]}),(0,t.jsx)(d.SZ,{children:"Configure which native features your app will use"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.features.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border border-white/10 hover:border-white/20 transition-colors","data-testid":"feature-".concat(e.id),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.enabled?"Enabled":"Disabled"})]}),(0,t.jsx)(f,{checked:e.enabled,onCheckedChange:s=>D(e.id,s)})]},e.id))})})]})}),(0,t.jsx)(h.nU,{value:"builds",children:(0,t.jsxs)(d.Zb,{className:"bg-background-paper border-white/10",children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Build History"}),(0,t.jsx)(d.SZ,{children:"All builds for this project"})]}),(0,t.jsx)(d.aY,{children:0===O.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"No builds yet"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Start a build from the Overview tab"})]}):(0,t.jsx)(p.x,{className:"h-[400px]",children:(0,t.jsx)("div",{className:"space-y-3",children:O.map(s=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border border-white/10","data-testid":"build-item-".concat(s.id),children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat("android"===s.platform?"bg-success/10":"bg-info/10"),children:"android"===s.platform?(0,t.jsx)(N.Z,{className:"w-5 h-5 text-success"}):(0,t.jsx)(w.Z,{className:"w-5 h-5 text-info"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:[s.platform.charAt(0).toUpperCase()+s.platform.slice(1)," Build"]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(Z.Z,{className:"w-3 h-3"}),new Date(s.created_at).toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:["completed"===s.status&&(0,t.jsxs)(o.C,{variant:"success",className:"flex items-center gap-1",children:[(0,t.jsx)(C.Z,{className:"w-3 h-3"}),"Completed"]}),"processing"===s.status&&(0,t.jsxs)(o.C,{className:"flex items-center gap-1 bg-primary/20 text-primary",children:[(0,t.jsx)(j.Z,{className:"w-3 h-3 animate-spin"}),s.progress,"%"]}),"failed"===s.status&&(0,t.jsxs)(o.C,{variant:"destructive",className:"flex items-center gap-1",children:[(0,t.jsx)(S.Z,{className:"w-3 h-3"}),"Failed"]}),"pending"===s.status&&(0,t.jsxs)(o.C,{variant:"warning",className:"flex items-center gap-1",children:[(0,t.jsx)(A.Z,{className:"w-3 h-3"}),"Pending"]}),"completed"===s.status&&(0,t.jsx)("a",{href:b.Sm.download(s.id,(null==e?void 0:e.id)||""),download:!0,children:(0,t.jsxs)(c.z,{size:"sm",variant:"outline",className:"border-white/10",children:[(0,t.jsx)(_.Z,{className:"w-4 h-4 mr-1"}),"Download"]})})]})]},s.id))})})})]})})]})})}},9174:function(e,s,r){"use strict";r.d(s,{C:function(){return n}});var t=r(7437);r(2265);var a=r(535),i=r(3448);let l=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-success/20 text-success",warning:"border-transparent bg-warning/20 text-warning"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:r,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)(l({variant:r}),s),...a})}},7204:function(e,s,r){"use strict";r.d(s,{E:function(){return n}});var t=r(7437),a=r(2265),i=r(1505),l=r(3448);let n=a.forwardRef((e,s)=>{let{className:r,value:a,...n}=e;return(0,t.jsx)(i.fC,{ref:s,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary/20",r),...n,children:(0,t.jsx)(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});n.displayName=i.fC.displayName},641:function(e,s,r){"use strict";r.d(s,{x:function(){return n}});var t=r(7437),a=r(2265),i=r(314),l=r(3448);let n=a.forwardRef((e,s)=>{let{className:r,children:a,...n}=e;return(0,t.jsxs)(i.fC,{ref:s,className:(0,l.cn)("relative overflow-hidden",r),...n,children:[(0,t.jsx)(i.l_,{className:"h-full w-full rounded-[inherit]",children:a}),(0,t.jsx)(d,{}),(0,t.jsx)(i.Ns,{})]})});n.displayName=i.fC.displayName;let d=a.forwardRef((e,s)=>{let{className:r,orientation:a="vertical",...n}=e;return(0,t.jsx)(i.gb,{ref:s,orientation:a,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...n,children:(0,t.jsx)(i.q4,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=i.gb.displayName},7168:function(e,s,r){"use strict";r.d(s,{SP:function(){return c},dr:function(){return d},mQ:function(){return n},nU:function(){return o}});var t=r(7437),a=r(2265),i=r(4419),l=r(3448);let n=i.fC,d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(i.aV,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...a})});d.displayName=i.aV.displayName;let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(i.xz,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...a})});c.displayName=i.xz.displayName;let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(i.VY,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...a})});o.displayName=i.VY.displayName}},function(e){e.O(0,[259,464,972,572,438,299,329,369,886,971,117,744],function(){return e(e.s=7386)}),_N_E=e.O()}]);