(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7224:function(t,e,r){Promise.resolve().then(r.t.bind(r,2778,23)),Promise.resolve().then(r.bind(r,4903)),Promise.resolve().then(r.bind(r,1245))},4903:function(t,e,r){"use strict";r.d(e,{Toaster:function(){return n}});var a=r(7437),o=r(4438);let n=t=>{let{...e}=t;return(0,a.jsx)(o.x7,{theme:"dark",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})}},1245:function(t,e,r){"use strict";r.d(e,{AuthProvider:function(){return l},a:function(){return c}});var a=r(7437),o=r(2265),n=r(5526),u=r(3464);let s="https://nativify.preview.emergentagent.com/api",i=(0,o.createContext)(null),c=()=>{let t=(0,o.useContext)(i);if(!t)throw Error("useAuth must be used within AuthProvider");return t},l=t=>{let{children:e}=t,[r,c]=(0,o.useState)(null),[l,d]=(0,o.useState)(null),[h,g]=(0,o.useState)(!0),m=(0,n.e)();(0,o.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await m.auth.getSession();if(null==e?void 0:e.user){d(e);try{let t=await u.Z.get("".concat(s,"/auth/me?token=").concat(e.access_token));c(t.data)}catch(r){var t;console.error("Failed to fetch user profile:",r),c({id:e.user.id,email:e.user.email||"",name:(null===(t=e.user.user_metadata)||void 0===t?void 0:t.name)||"",role:"user"})}}}catch(t){console.error("Auth init error:",t)}finally{g(!1)}})();let{data:{subscription:t}}=m.auth.onAuthStateChange(async(t,e)=>{if(d(e),null==e?void 0:e.user)try{let t=await u.Z.get("".concat(s,"/auth/me?token=").concat(e.access_token));c(t.data)}catch(t){var r;c({id:e.user.id,email:e.user.email||"",name:(null===(r=e.user.user_metadata)||void 0===r?void 0:r.name)||"",role:"user"})}else c(null)});return()=>{t.unsubscribe()}},[]);let p=async(t,e)=>{let{token:r,user:a}=(await u.Z.post("".concat(s,"/auth/login"),{email:t,password:e})).data;return await m.auth.signInWithPassword({email:t,password:e}),c(a),a},f=async(t,e,r)=>(await u.Z.post("".concat(s,"/auth/register"),{email:t,password:e,name:r})).data,b=async()=>{try{(null==l?void 0:l.access_token)&&await u.Z.post("".concat(s,"/auth/logout?token=").concat(l.access_token))}catch(t){console.error("Logout error:",t)}await m.auth.signOut(),c(null),d(null)},v=async()=>{await m.auth.signInWithOAuth({provider:"github",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}})};return(0,a.jsx)(i.Provider,{value:{user:r,session:l,loading:h,login:p,register:f,logout:b,loginWithGitHub:v,isAuthenticated:!!r},children:e})}},5526:function(t,e,r){"use strict";r.d(e,{e:function(){return o}});var a=r(1259);function o(){return(0,a.createBrowserClient)("https://nrjadlmluharqvlqymtp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yamFkbG1sdWhhcnF2bHF5bXRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2NzM2OTYsImV4cCI6MjA4MzI0OTY5Nn0.F68c5SETbif9HWdNMRBbXa5tEvXVegrbdob5fFjLo38")}},2778:function(){}},function(t){t.O(0,[461,259,464,438,971,117,744],function(){return t(t.s=7224)}),_N_E=t.O()}]);